{% extends 'basic.html' %}
{% block title %} {{product.product_name}} {% endblock %}

{% block css %}
{% endblock %}
{% block body %}
{% load static %}
<input type="hidden" value="pr{{product.product_id}}" id="prid">
<input type="hidden" id="img" value="{{photos.0.images.url}}">
<section class="text-gray-600 body-font overflow-hidden">
  <div class="w-full px-5 py-7 mx-auto">
    <div class="lg:w-4/5 mx-auto flex flex-wrap items-center">
      <!------------------------------------------------ Carousel--------------------- -->
      <div class="md:w-1/2 w-full overflow-hidden">
        <div class="flex flex-row flex-nowrap relative items-center flex-auto h-fit slider transition ease-out delay-150 duration-500">
          <!------------------------------ For Loop------------------- -->
          {% for p in photos %}
        <img src="{{p.images.url}}" class="slide w-full " alt="prod1">
        
        <!-------------- End For Loop------------------------------------------- -->
        {% endfor %}
        </div>
        <div class="text-center py-2">
       <button class=" hover:bg-purple-200 p-2" onclick="prev()"><i class="fa-solid fa-chevron-left"></i></button>&nbsp <button class=" hover:bg-purple-200 p-2" onclick="next()"><i class="fa-solid fa-chevron-right"></i></button>
      </div>
      </div>

        <div class="lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">
          <h2 class="text-sm title-font text-gray-500 tracking-widest" id="redirect">Thistle</h2>
          <h1 class="text-gray-900 text-3xl title-font font-medium mb-1" id="name">{{product.product_name}}</h1>
          <div class="flex mb-4">
            <span class="flex items-center">
              {% for i in stars %}
              {% if i %}
              
              <i class="fa-solid fa-star text-red-500"></i>
              
              {% else %}
              
              <i class="fa-regular fa-star text-red-500"></i>
              
              {% endif %}
              {% endfor %}
            </span>
            <span class="flex ml-3 pl-3 py-2 border-l-2 border-gray-200 space-x-2s">
             
            </span>
          </div>

          <p class="leading-relaxed font-medium">{{product.desc}}</p>
          <p class="leading-relaxed font-medium">{{product.desc2}}</p>
          <p class="font-bold pt-2">Directions:</p>
          <p class="leading-relaxed">{{product.directions}}</p>

          <div class="flex mt-6 items-center pb-5 border-b-2 border-gray-100 mb-5">
            <div class="flex ml-6 items-center">
              
              <div class="relative">
                
              </div>
            </div>
          </div>
          <div class="mt-5 items-center w-full ">
            <span class="title-font font-medium text-2xl text-gray-900" >
                &#8377<span id="price" class="pr-2">{{product.sale_price}}</span>
                <span  class="line-through text-xl text-gray-600 pr-3"> &#8377<span id="mrp"> {{product.mrp}} </span></span> </span>
            <span id="discount" class=""></span>
            {% if product.availabilty %}
            <span id="atc" class="divpr"> <button class=" cart flex  text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 mt-5 rounded">Add to cart</button></span>
            {% else %}
            <button disabled class=" cart flex mt-5 ml-auto text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded">Out of stock</button>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    <!-------------------------------------- Feedback-------------------------------------------------------------- -->
    <div class=" lg:w-4/5 mx-auto py-8 " id="reviews"><h3 class="text-3xl text-black font-medium border-b-2 border-purple-300 md: ml-2">Customer reviews</h3>
      <div class="lg:flex flex-row">
      <div class="p-5  w-full lg:w-1/2">
       
       <div class="pt-3">
        {% for i in reviews %}
        <div class=" flex flex-row items-center py-2">
          
            <div class="bg-white rounded-lg shadow-lg overflow-hidden w-full ">
              <div class="px-6 py-4">
                <div class="text-xl font-bold mb-4 w-full flex flex-row">
                  <span class="mr-2">{{i.name}}</span>
                  <span class=" ml-auto">
            
                    {% for j in '12345'|make_list %}
                    {% if forloop.counter <= i.rate %}

                    <i class="fa-solid fa-star text-red-500 " style="transform: scale(0.8);"></i>
              
                    {% else %}
                    
                    <i class="fa-regular fa-star text-red-500" style="transform: scale(0.8);"></i>
                    
                    {% endif %}
                    {% endfor %}
                  </span>
                </div>
                <p class="text-gray-500 text-base break-words">{{i.comment}}</p>
              </div>
              
            </div>
          </div>
          <!-- -------------------------------------------------------Previous reviews ----------------------------------------- -->
          {% endfor %} 
        </div>
        
       
        </div>
        
      
      <div class="p-5   w-full">
        <!-- USER REVIEW ================= -->
        {% if logged_in %}
        {% if done %}
        
          <div class="pt-5">
          <div class="bg-white rounded-lg shadow-lg overflow-hidden w-full ">
            <div class="px-6 py-4">
              <div class="text-xl font-bold mb-2 flex flex-row ">
                <span class="mr-2">{{user_review.name}}</span>
                <span class="text-right ml-auto">
                  {% for j in '12345'|make_list %}
                  {% if forloop.counter <= user_review.rate %}

                  <i class="fa-solid fa-star text-red-500" style="transform: scale(0.8);"></i>
            
                  {% else %}
                  
                  <i class="fa-regular fa-star text-red-500" style="transform: scale(0.8);"> </i>
                  
                  {% endif %}
                  {% endfor %}
                </span>
              </div>
              <p class="text-gray-700 text-base">{{user_review.comment}}</p>
            </div>
            
          </div>
        </div>
      </div>
        {% else %}
         WRITE YOUR REVIEW
         <!-- <img src="{% static '20221216_231612_06.jpg' %}" alt=""> -->
         <!-- "{% static '20221216_231612_06.jpg' %}" -->
    
        <form class="py-3" actiion="/products/{{product.product_id}}" method="get">
          <input type="hidden" class="form-control" id="name" name = "name" value="{{request.user}}">
            <input type="hidden" class="form-control" id="email" name="email" value="{{request.user.email}}">
        <textarea placeholder="Your Review" name="review" class="border-2 border-purple-300 w-full text-md p-2" rows="4"></textarea>
        
        <div class="py-3"> YOUR RATING:&nbsp 
          <input type="radio" name="rating" id="star1" value="1" class="hidden"><label for="star1"><i class="fa-solid fa-star cursor-pointer text-gray-600 hover:text-red-500 rate"></i></label>
          <input type="radio" name="rating" id="star2" value="2" class="hidden"><label for="star2"><i class="fa-solid fa-star cursor-pointer text-gray-600 hover:text-red-500 rate"></i></label>
          <input type="radio" name="rating" id="star3" value="3" class="hidden"><label for="star3"><i class="fa-solid fa-star cursor-pointer text-gray-600 hover:text-red-500 rate"></i></label>
          <input type="radio" name="rating" id="star4" value="4" class="hidden"><label for="star4"><i class="fa-solid fa-star cursor-pointer text-gray-600 hover:text-red-500 rate"></i></label>
          <input type="radio" name="rating" id="star5" value="5" class="hidden"><label for="star5"><i class="fa-solid fa-star cursor-pointer text-gray-600 hover:text-red-500 rate"></i></label>
        </div>

          <button type="submit" class="bg-indigo-500 text-white px-5 py-2 border-2 rounded hover:bg-indigo-600 cursor-pointer">Submit review</button>
        </form>
        {% endif %}
        {% else %}
        please login to review this item
        {% endif %}
      </div>
    </div>
  </div>

          
          
          
          
      
  </section>
  
  
 
  

  
      
{% endblock %}
{% block js %}
<script src="{% static 'prodview.js' `%}"></script>
{% endblock %}