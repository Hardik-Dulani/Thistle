{% extends 'basic.html' %}
{% block title %} Cart-Thistle {% endblock %}
{% block body %}
<input type="hidden" name="itemsJson" id="itemsJson">
<body>
  <div class="mt-20 justify-center">
      <p class = "font-bold px-4 ">*Note: [ Please confirm the payment using the Valid UTR , else your order will be declined ]</p>
  </div>
  <div class="container p-12 mx-auto">
      <div class="flex flex-col w-full px-0 mx-auto md:flex-row">
          <div class="flex flex-col md:w-full">
              <h2 class="mb-4 font-bold md:text-xl text-heading ">Shipping Address
              </h2>
              <form class="justify-center w-full mx-auto" method="post" action>
                  <div class="">
                      <div class="space-x-0 lg:flex lg:space-x-4">
                          <div class="w-full lg:w-1/2">
                              <label for="firstName" class="block mb-3 text-sm font-semibold text-gray-500">First
                                  Name</label>
                              <input name="firstName" type="text" placeholder="First Name"
                                  class="w-full px-4 py-3 text-sm border border-gray-300 rounded lg:text-sm focus:outline-none focus:ring-1 focus:ring-blue-600">
                          </div>
                          <div class="w-full lg:w-1/2 ">
                              <label for="firstName" class="block mb-3 text-sm font-semibold text-gray-500">Last
                                  Name</label>
                              <input name="Last Name" type="text" placeholder="Last Name"
                                  class="w-full px-4 py-3 text-sm border border-gray-300 rounded lg:text-sm focus:outline-none focus:ring-1 focus:ring-blue-600">
                          </div>
                      </div>
                      
                      <div class="mt-4">
                          <div class="w-full">
                              <label for="Address"
                                  class="block mb-3 text-sm font-semibold text-gray-500">Address</label>
                              <textarea
                                  class="w-full px-4 py-3 text-xs border border-gray-300 rounded lg:text-sm focus:outline-none focus:ring-1 focus:ring-blue-600"
                                  name="Address" cols="20" rows="4" placeholder="Address"></textarea>
                          </div>
                      </div>
                      <div class="space-x-0 lg:flex lg:space-x-4">
                          <div class="w-full lg:w-1/2">
                              <label for="city"
                                  class="block mb-3 text-sm font-semibold text-gray-500">City</label>
                              <input name="city" type="text" placeholder="City"
                                  class="w-full px-4 py-3 text-sm border border-gray-300 rounded lg:text-sm focus:outline-none focus:ring-1 focus:ring-blue-600">
                          </div>
                          <div class="w-full lg:w-1/2 ">
                              <label for="postcode" class="block mb-3 text-sm font-semibold text-gray-500">
                                  Postcode</label>
                              <input name="postcode" type="text" placeholder="Post Code"
                                  class="w-full px-4 py-3 text-sm border border-gray-300 rounded lg:text-sm focus:outline-none focus:ring-1 focus:ring-blue-600">
                          </div>
                      </div>

                      <div class="relative pt-3 xl:pt-6"><label for="note"
                              class="block mb-3 text-sm font-semibold text-gray-500"> Notes
                              (Optional)</label><textarea name="note"
                              class="flex items-center w-full px-4 py-3 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-600"
                              rows="4" placeholder="Notes for delivery"></textarea>
                      </div>
                      <div class="mt-4">
                          <button class="w-full px-6 py-2 text-blue-200 bg-blue-600 hover:bg-blue-900">Process</button>
                      </div>
                  </div>
              </form>
          </div>
      </div>
  </div>
</body>
{% endblock %}






{% block js %}
  <script>
    if (localStorage.getItem('thistle_cart') == null) {
        var cart = {};
    } else {
        cart = JSON.parse(localStorage.getItem('thistle_cart'));
    }
    console.log(cart);
    var sum = 0;
    
    var shipping = parseInt(document.getElementById('shipping').innerHTML);
    totalPrice = shipping;
    var totalMrp = 0;
    var subtotal = 0;
    if ($.isEmptyObject(cart)) {
        //if object is empty
        mystr = `<p>Your cart is empty, please add some items to your cart before checking out!</p>`
        $('#items').append(mystr);
    } else {
        for (item in cart) {
            sum = sum + qty;
            totalPrice = totalPrice + qty*price
            subtotal = subtotal + qty*price
            totalMrp = totalMrp + qty* mrp
          }


    }
    // document.getElementById('cart').innerHTML = sum;
    document.getElementById('totalPrice').innerHTML = totalPrice;
    document.getElementById('subtotal').innerHTML = subtotal;
    $('#itemsJson').val(JSON.stringify(cart));

  </script>
  {% endblock %}